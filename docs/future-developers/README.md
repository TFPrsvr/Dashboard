<div style="background: linear-gradient(135deg, #ea580c 0%, #dc2626 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">👨‍💻 Developer Documentation Hub</span>
<span style="font-size: 1.5rem; opacity: 0.9;">🚀 PassItOn Admin Dashboard Technical Guide</span>

</div>

<div style="background: #fef2f2; border-left: 5px solid #ea580c; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<p style="font-size: 1.1rem; line-height: 1.7; color: #374151;">Welcome to the PassItOn Admin Dashboard developer documentation. This README serves as the central hub for all technical documentation and guides.</p>

</div>

<div style="background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); color: white; padding: 2rem; border-radius: 12px; margin: 2rem 0;">

<span style="font-size: 2rem; font-weight: 800;">📚 Quick Navigation</span>

<div style="display: grid; gap: 1.5rem; margin-top: 2rem;">

<div style="background: rgba(255,255,255,0.2); padding: 1.5rem; border-radius: 10px;">
<h3 style="margin: 0 0 1rem 0; font-size: 1.4rem; font-weight: 700;">🚀 Getting Started</h3>
<div style="display: grid; gap: 0.5rem; font-size: 1rem;">
<div><strong>📋 [Comprehensive Setup & Deployment Guide](./comprehensive-setup-deployment-guide.md)</strong> - Complete setup instructions</div>
<div><strong>⚙️ [Environment Variables Setup](./environment-variables-setup.md)</strong> - Detailed environment configuration</div>
<div><strong>🔐 [Authentication System Guide](./authentication-system-guide.md)</strong> - Clerk authentication integration</div>
</div>
</div>

<div style="background: rgba(255,255,255,0.2); padding: 1.5rem; border-radius: 10px;">
<h3 style="margin: 0 0 1rem 0; font-size: 1.4rem; font-weight: 700;">🔧 Development & Deployment</h3>
<div style="display: grid; gap: 0.5rem; font-size: 1rem;">
<div><strong>📆 [API Reference](./api-reference.md)</strong> - Complete API documentation</div>
<div><strong>🏢 [Components Architecture](./components-architecture.md)</strong> - Component structure and patterns</div>
<div><strong>✅ [Testing Procedures](./testing-procedures.md)</strong> - Test cases and procedures</div>
<div><strong>🔍 [Cross Project Testing Guide](./cross-project-testing-guide.md)</strong> - Integration testing</div>
</div>
</div>

<div style="background: rgba(255,255,255,0.2); padding: 1.5rem; border-radius: 10px;">
<h3 style="margin: 0 0 1rem 0; font-size: 1.4rem; font-weight: 700;">🛠️ Maintenance & Operations</h3>
<div style="display: grid; gap: 0.5rem; font-size: 1rem;">
<div><strong>🔍 [Technical Troubleshooting Guide](../admins/technical-troubleshooting-guide.md)</strong> - Comprehensive troubleshooting</div>
<div><strong>🔧 [Maintenance Guide](./maintenance-guide.md)</strong> - System maintenance procedures</div>
<div><strong>🔗 [Integration Implementation Guide](./integration-implementation-guide.md)</strong> - Platform integrations</div>
</div>
</div>

</div>

</div>

<div style="background: #fef2f2; border: 2px solid #f87171; padding: 2rem; border-radius: 12px; margin: 2rem 0;">

<div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 1.5rem; border-radius: 12px; margin: 2rem 0;">

<span style="font-size: 1.8rem; font-weight: 700;">📌 <span style="color: #dc2626; font-size: 1.8rem; font-weight: 700;">⚡ Quick Start</span></span>

</div>

<p style="color: #374151; font-size: 1.1rem; margin-bottom: 1rem;">For immediate setup, follow these steps:</p>

<div style="background: #374151; color: #e5e7eb; padding: 1.5rem; border-radius: 10px; font-family: monospace; font-size: 0.9rem; margin: 1rem 0;">
<div style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">⚙️ Clone and setup</span>

</div>
git clone &lt;git@github-banyan:Banyan-Labs/PassItOn-Admin.git&gt;
cd PassItOn-Admin
npm install

<div style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">🔧 Configure environment</span>

</div>
cp .env.example .env.local
<div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">🔧 Edit .env.local with your configuration</span>

</div>

<div style="background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Start development</span>

</div>
npm run dev
</div>

<div style="background: #fecaca; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
<p style="color: #374151; margin: 0.5rem 0;"><strong>🌐 Visit:</strong> <code style="background: #374151; color: #e5e7eb; padding: 0.2rem 0.5rem; border-radius: 4px;">http://localhost:3000</code> to access the application.</p>
<p style="color: #374151; margin: 0.5rem 0;"><strong>📋 For complete setup instructions,</strong> see the <a href="./comprehensive-setup-deployment-guide.md" style="color: #dc2626; text-decoration: underline;">Comprehensive Setup & Deployment Guide</a>.</p>
</div>

</div>

<div style="background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); color: white; padding: 2rem; border-radius: 12px; margin: 2rem 0;">

<div style="background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color: white; padding: 1.5rem; border-radius: 12px; margin: 2rem 0;">

<span style="font-size: 1.8rem; font-weight: 700;">📌 <span style="font-size: 2rem; font-weight: 800;">⚠️ Prerequisites</span></span>

</div>

</div>

<div style="background: #fefbfb; border: 2px solid #f87171; padding: 2rem; border-radius: 12px; margin: 2rem 0;">

<p style="color: #7f1d1d; font-size: 1.1rem; font-weight: 600; margin-bottom: 1.5rem;">Before setting up the project, ensure you have the following installed:</p>

<div style="display: grid; gap: 1.5rem; margin: 1rem 0;">

<div style="background: #fee2e2; border: 2px solid #fca5a5; border-radius: 10px; padding: 1.5rem;">
<h3 style="color: #b91c1c; margin: 0 0 1rem 0; font-size: 1.3rem;">💻 Required Software</h3>
<ul style="color: #374151; font-size: 1rem; line-height: 1.6; list-style: none; padding: 0;">
<li style="margin: 0.3rem 0;"><strong style="color: #dc2626;">Node.js</strong> (v18.17.0 or higher)</li>
<li style="margin: 0.3rem 0;"><strong style="color: #dc2626;">npm</strong> (v9.6.7 or higher)</li>
<li style="margin: 0.3rem 0;"><strong style="color: #dc2626;">Git</strong> (latest version)</li>
</ul>
</div>

<div style="background: #fef3c7; border: 2px solid #fbbf24; border-radius: 10px; padding: 1.5rem;">
<h3 style="color: #d97706; margin: 0 0 1rem 0; font-size: 1.3rem;">🌐 Required Services</h3>
<ul style="color: #374151; font-size: 1rem; line-height: 1.6; list-style: none; padding: 0;">
<li style="margin: 0.3rem 0;"><strong style="color: #f59e0b;">Supabase</strong> account (database & authentication)</li>
<li style="margin: 0.3rem 0;"><strong style="color: #f59e0b;">Clerk</strong> account (user management)</li>
<li style="margin: 0.3rem 0;"><strong style="color: #f59e0b;">Stripe</strong> account (payments)</li>
</ul>
</div>

<div style="background: #f3e8ff; border: 2px solid #c084fc; border-radius: 10px; padding: 1.5rem;">
<h3 style="color: #9333ea; margin: 0 0 1rem 0; font-size: 1.3rem;">🛠️ Development Tools (Recommended)</h3>
<p style="color: #374151; margin: 0.5rem 0;"><strong style="color: #a855f7;">VS Code</strong> with extensions:</p>
<ul style="color: #374151; font-size: 1rem; line-height: 1.6; margin-left: 1rem;">
<li>TypeScript and JavaScript Language Features</li>
<li>Tailwind CSS IntelliSense</li>
<li>ES7+ React/Redux/React-Native snippets</li>
<li>Prettier - Code formatter</li>
</ul>
</div>

</div>

</div>

<div style="background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); color: white; padding: 2rem; border-radius: 12px; margin: 2rem 0;">

<div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 1.5rem; border-radius: 12px; margin: 2rem 0;">

<span style="font-size: 1.8rem; font-weight: 700;">📦 <span style="font-size: 2rem; font-weight: 800;">🚀 Installation</span></span>

</div>

</div>

<div style="background: #fff7ed; border: 2px solid #fb923c; padding: 2rem; border-radius: 12px; margin: 2rem 0;">

<div style="counter-reset: install-counter; margin: 1rem 0;">

<div style="counter-increment: install-counter; background: #fed7aa; border-left: 6px solid #ea580c; padding: 1.5rem; margin: 1.5rem 0; border-radius: 8px; position: relative;">
<div style="position: absolute; top: -10px; left: -10px; background: #ea580c; color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold;">1</div>

<h3 style="color: #c2410c; font-size: 1.4rem; margin-top: 0;">📋 Clone the Repository</h3>
<div style="background: #374151; color: #e5e7eb; padding: 1rem; border-radius: 6px; font-family: monospace; font-size: 0.9rem; margin: 0.5rem 0;">
git clone &lt;git@github-banyan:Banyan-Labs/PassItOn-Admin.git&gt;
cd PassItOn-Admin
</div>

</div>

<div style="counter-increment: install-counter; background: #fef3c7; border-left: 6px solid #f59e0b; padding: 1.5rem; margin: 1.5rem 0; border-radius: 8px; position: relative;">
<div style="position: absolute; top: -10px; left: -10px; background: #f59e0b; color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold;">2</div>

<h3 style="color: #d97706; font-size: 1.4rem; margin-top: 0;">📦 Install Dependencies</h3>
<div style="background: #374151; color: #e5e7eb; padding: 1rem; border-radius: 6px; font-family: monospace; font-size: 0.9rem; margin: 0.5rem 0;">
npm install
</div>

<div style="background: #fbbf24; color: white; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
<h4 style="margin: 0 0 0.5rem 0; font-size: 1.1rem;">🔴 Core Dependencies:</h4>
<ul style="font-size: 0.9rem; margin: 0; list-style: none; padding: 0;">
<li>• <code>next</code> - React framework</li>
<li>• <code>react</code> & <code>react-dom</code> - React library</li>
<li>• <code>typescript</code> - Type safety</li>
<li>• <code>@supabase/supabase-js</code> - Database client</li>
<li>• <code>@clerk/nextjs</code> - Authentication</li>
<li>• <code>stripe</code> - Payment processing</li>
</ul>
</div>

<div style="background: #f59e0b; color: white; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
<h4 style="margin: 0 0 0.5rem 0; font-size: 1.1rem;">🎨 UI Dependencies:</h4>
<ul style="font-size: 0.9rem; margin: 0; list-style: none; padding: 0;">
<li>• <code>@radix-ui/*</code> - Headless UI components</li>
<li>• <code>tailwindcss</code> - CSS framework</li>
<li>• <code>lucide-react</code> - Icons</li>
<li>• <code>class-variance-authority</code> - Styling utilities</li>
</ul>
</div>

</div>

<div style="counter-increment: install-counter; background: #ecfdf5; border-left: 6px solid #10b981; padding: 1.5rem; margin: 1.5rem 0; border-radius: 8px; position: relative;">
<div style="position: absolute; top: -10px; left: -10px; background: #10b981; color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold;">3</div>

<h3 style="color: #059669; font-size: 1.4rem; margin-top: 0;">⚙️ Environment Configuration</h3>
<p style="color: #374151; margin: 0.5rem 0;">Copy the environment template:</p>
<div style="background: #374151; color: #e5e7eb; padding: 1rem; border-radius: 6px; font-family: monospace; font-size: 0.9rem; margin: 0.5rem 0;">
cp .env.example .env.local
</div>

</div>

</div>

</div>

<div style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); color: white; padding: 1.5rem; border-radius: 12px; margin: 2rem 0;">

<span style="font-size: 1.8rem; font-weight: 700;">⚙️ Environment Setup</span>

</div>

Create a `.env.local` file in the project root with the following variables:

```env
<div style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">🔧 App Configuration</span>

</div>
NEXT_PUBLIC_APP_URL=http://localhost:3000

<div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">🔐 Clerk Authentication</span>

</div>
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/dashboard
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/onboarding

<div style="background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">🗄️ Supabase Database</span>

</div>
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

<div style="background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">🔧 Stripe Configuration</span>

</div>
STRIPE_SECRET_KEY=sk_test_...
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_CONNECT_WEBHOOK_SECRET=whsec_...
```

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">📌 Getting Environment Variables</span>

</div>

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">⚙️ Clerk Setup</span>

</div>
1. Go to [Clerk Dashboard](https://dashboard.clerk.com/)
2. Create a new application
3. Copy the publishable and secret keys
4. Configure redirect URLs in Clerk dashboard

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">⚙️ Supabase Setup</span>

</div>
1. Go to [Supabase Dashboard](https://supabase.com/dashboard)
2. Create a new project
3. Go to Settings → API
4. Copy the URL and anon key
5. Copy the service role key (for server-side operations)

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">⚙️ Stripe Setup</span>

</div>
1. Go to [Stripe Dashboard](https://dashboard.stripe.com/)
2. Get your API keys from Developers → API keys
3. Set up webhooks for `/api/webhooks/stripe`
4. Configure Stripe Connect (see Stripe Setup Tutorial below)

<div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 1.5rem; border-radius: 12px; margin: 2rem 0;">

<span style="font-size: 1.8rem; font-weight: 700;">⚙️ Database Setup</span>

</div>

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">📌 1. Running Migrations</span>

</div>

```bash
<div style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📦 Install Supabase CLI (if not already installed)</span>

</div>
npm install -g supabase

<div style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Login to Supabase</span>

</div>
supabase login

<div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Link to your project</span>

</div>
supabase link --project-ref your-project-ref

<div style="background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Run migrations</span>

</div>
supabase db push

<div style="background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Generate TypeScript types</span>

</div>
npm run db:generate
```

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">🗄️ 2. Database Schema</span>

</div>

The application uses the following main tables:

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">📌 Organizations Table</span>

</div>
```sql
CREATE TABLE organizations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  email TEXT NOT NULL,
  stripe_customer_id TEXT,
  subscription_status TEXT DEFAULT 'trial',
  created_at TIMESTAMP WITH TIME ZONE DEFAULT now(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT now()
);
```

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">📌 Users Table  </span>

</div>
```sql
CREATE TABLE users (
  id TEXT PRIMARY KEY, -- Clerk user ID
  email TEXT NOT NULL,
  role TEXT NOT NULL DEFAULT 'editor' CHECK (role IN ('super_admin', 'owner', 'editor')),
  organization_id UUID REFERENCES organizations(id),
  status TEXT DEFAULT 'accepted' CHECK (status IN ('pending', 'accepted')),
  invited_at TIMESTAMP WITH TIME ZONE,
  accepted_at TIMESTAMP WITH TIME ZONE,
  invitation_token TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT now()
);
```

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">📌 Widgets Table</span>

</div>
```sql
CREATE TABLE widgets (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  organization_id UUID NOT NULL REFERENCES organizations(id),
  name TEXT NOT NULL,
  slug TEXT NOT NULL,
  config JSONB DEFAULT '{}',
  is_active BOOLEAN DEFAULT false,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT now(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT now()
);
```

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">📌 Donations Table</span>

</div>
```sql
CREATE TABLE donations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  widget_id UUID REFERENCES widgets(id),
  amount DECIMAL(10,2) NOT NULL,
  currency TEXT DEFAULT 'USD',
  stripe_payment_intent_id TEXT,
  donor_email TEXT,
  donor_name TEXT,
  status TEXT DEFAULT 'pending',
  created_at TIMESTAMP WITH TIME ZONE DEFAULT now()
);
```

<div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 1.5rem; border-radius: 12px; margin: 2rem 0;">

<span style="font-size: 1.8rem; font-weight: 700;">📌 Development</span>

</div>

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">📌 Starting the Development Server</span>

</div>

```bash
npm run dev
```

The application will be available at `http://localhost:3000`.

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">📌 Available Scripts</span>

</div>

```bash
npm run dev          # Start development server with Turbo
npm run build        # Build for production
npm run start        # Start production server
npm run lint         # Run ESLint
npm run db:push      # Push database schema
npm run db:generate  # Generate TypeScript types
```

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">📌 Development Workflow</span>

</div>

1. **Environment Setup**
   - Copy `.env.example` to `.env.local`
   - Fill in all required environment variables
   - Run `npm install` to install dependencies

2. **Database Setup**
   - Create Supabase project
   - Run migrations with `supabase db push`
   - Generate types with `npm run db:generate`

3. **Authentication Setup**
   - Create Clerk application
   - Configure redirect URLs
   - Add API keys to environment

4. **Development Process**
   - Start dev server: `npm run dev`
   - Make changes to code
   - Test in browser (hot reload enabled)
   - Run linting: `npm run lint`
   - Test across different user roles

5. **Testing User Roles**
   - Create test users with different roles in database
   - Test super admin features at `/admin/*` routes
   - Test organization owner features at `/dashboard/*`
   - Test editor permissions and restrictions

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">📖 Code Structure Guidelines</span>

</div>

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">📌 Components</span>

</div>
- Use TypeScript for all components
- Follow naming convention: `ComponentName.tsx`
- Keep components focused and reusable
- Use proper prop typing

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">🔌 API Routes</span>

</div>
- Follow RESTful conventions
- Use proper HTTP status codes
- Implement error handling
- Add request validation

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">🗄️ Database Operations</span>

</div>
- Use Supabase client for frontend operations
- Use supabaseAdmin for server-side operations
- Implement proper error handling
- Follow Row Level Security (RLS) patterns

<div style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); color: white; padding: 1.5rem; border-radius: 12px; margin: 2rem 0;">

<span style="font-size: 1.8rem; font-weight: 700;">📊 Architecture Overview</span>

</div>

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">📌 Project Structure</span>

</div>

```
PassItOn-Admin/
├── app/                          # Next.js 14 App Router
│   ├── (auth)/                   # Authentication routes
│   ├── (dashboard)/              # Protected dashboard routes
│   │   ├── admin/                # Super admin pages
│   │   ├── dashboard/           # Organization dashboard
│   │   └── widget/              # Widget customization
│   └── api/                     # API routes
├── components/                  # Reusable React components
│   ├── dashboard/              # Dashboard-specific components
│   └── ui/                     # Base UI components
├── lib/                        # Utility functions
├── hooks/                      # Custom React hooks
├── types/                      # TypeScript definitions
└── supabase/                   # Database configuration
```

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">📌 Tech Stack</span>

</div>

- **Next.js 14** - React framework with App Router
- **TypeScript** - Type safety
- **Tailwind CSS** - Utility-first CSS framework
- **Supabase** - PostgreSQL database with real-time features
- **Clerk** - User authentication and management
- **Stripe** - Payment processing and Connect for multi-tenant

<div style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; padding: 1.5rem; border-radius: 12px; margin: 2rem 0;">

<span style="font-size: 1.8rem; font-weight: 700;">✨ Key Features</span>

</div>

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">📌 Multi-Tenant Architecture</span>

</div>

The application supports multiple organizations with role-based access:

**Roles:**
- **Super Admin** - Platform administration
- **Owner** - Organization management  
- **Editor** - Content management

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">🔐 Authentication Flow</span>

</div>

1. **Sign Up/Sign In** - Handled by Clerk
2. **Organization Assignment** - Users linked to organizations
3. **Role Detection** - Permissions based on user role
4. **Dashboard Routing** - Role-based dashboard access

<div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 1.5rem; border-radius: 12px; margin: 2rem 0;">

<span style="font-size: 1.8rem; font-weight: 700;">🔌 API Documentation</span>

</div>

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">🔐 Authentication</span>

</div>
All API routes are protected by Clerk middleware. Include authentication headers:

```javascript
const response = await fetch('/api/endpoint', {
  headers: {
    'Authorization': `Bearer ${await getToken()}`,
    'Content-Type': 'application/json'
  }
});
```

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">🔌 Organizations API</span>

</div>

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">🔌 GET `/api/organizations`</span>

</div>
Get all organizations (Super Admin only)

**Response:**
```json
[
  {
    "id": "123e4567-e89b-12d3-a456-426614174000",
    "name": "Acme Nonprofit",
    "email": "contact@acme.org",
    "subscription_status": "active",
    "created_at": "2024-01-01T00:00:00Z"
  }
]
```

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">🔌 GET `/api/organizations/[orgId]`</span>

</div>
Get specific organization details

**Response:**
```json
{
  "id": "123e4567-e89b-12d3-a456-426614174000",
  "name": "Acme Nonprofit",
  "email": "contact@acme.org",
  "stripe_customer_id": "cus_...",
  "subscription_status": "active",
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T00:00:00Z"
}
```

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">🔌 Team Management API</span>

</div>

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">🔌 POST `/api/team/invite`</span>

</div>
Send team invitation

**Request Body:**
```json
{
  "email": "user@example.com",
  "role": "editor",
  "organizationId": "123e4567-e89b-12d3-a456-426614174000",
  "organizationName": "Acme Nonprofit"
}
```

**Response:**
```json
{
  "success": true,
  "message": "Invitation sent successfully"
}
```

**Error Response:**
```json
{
  "error": "User already exists in this organization"
}
```

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">🔌 Widget API</span>

</div>

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">🔌 GET `/api/widgets`</span>

</div>
Get organization's widgets

**Response:**
```json
[
  {
    "id": "widget-id",
    "name": "Main Donation Widget",
    "slug": "main-widget",
    "is_active": true,
    "config": {
      "theme": "light",
      "primaryColor": "#3B82F6"
    },
    "created_at": "2024-01-01T00:00:00Z"
  }
]
```

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">🔌 Stripe Integration API</span>

</div>

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">🔌 POST `/api/stripe/connect`</span>

</div>
Initialize Stripe Connect onboarding

**Request Body:**
```json
{
  "organizationId": "123e4567-e89b-12d3-a456-426614174000"
}
```

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">🔌 GET `/api/stripe/connect/status`</span>

</div>
Check Stripe Connect account status

**Response:**
```json
{
  "connected": true,
  "account_id": "acct_...",
  "charges_enabled": true,
  "payouts_enabled": true
}
```

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">📌 Webhook Endpoints</span>

</div>

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">🔌 POST `/api/webhooks/stripe`</span>

</div>
Handle Stripe webhook events

**Events Handled:**
- `payment_intent.succeeded`
- `payment_intent.payment_failed`
- `charge.dispute.created`

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">🔌 POST `/api/webhooks/clerk`</span>

</div>
Handle Clerk webhook events

**Events Handled:**
- `user.created`
- `user.updated`
- `user.deleted`

<div style="background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); color: white; padding: 1.5rem; border-radius: 12px; margin: 2rem 0;">

<span style="font-size: 1.8rem; font-weight: 700;">⚙️ Stripe Setup Tutorial</span>

</div>

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">📌 For Customers: How to Connect Your Stripe Account</span>

</div>

This tutorial helps customers connect their Stripe accounts to receive donations through their widgets.

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">📌 Step 1: Access Stripe Connect Settings</span>

</div>

1. **Log into your dashboard** at your organization's dashboard
2. **Navigate to Settings** → **Payment Settings**
3. **Click "Connect Stripe Account"**

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">⚙️ Step 2: Stripe Account Setup</span>

</div>

If you don't have a Stripe account:

1. **Go to [stripe.com](https://stripe.com)** and click "Start now"
2. **Create your account** with business information
3. **Verify your identity** (required for receiving payments)
4. **Add bank account** for payouts

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">📌 Step 3: Connect to PassItOn</span>

</div>

1. **Click "Connect with Stripe"** in your PassItOn dashboard
2. **You'll be redirected to Stripe** - log in if prompted
3. **Review permissions** - PassItOn needs to:
   - Process payments on your behalf
   - Access transaction data
   - Handle refunds and disputes
4. **Click "Connect account"** to authorize

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">📌 Step 4: Verification</span>

</div>

1. **Complete Stripe's verification process**:
   - Business details
   - Tax information  
   - Bank account verification
   - Identity documents (if required)

2. **Test your connection**:
   - Return to PassItOn dashboard
   - Status should show "Connected"
   - Make a test donation to verify

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">🔧 Step 5: Configure Payout Settings</span>

</div>

1. **In your Stripe dashboard**, go to Settings → Payouts
2. **Set payout schedule** (daily, weekly, monthly)
3. **Choose payout method** (bank account, debit card)
4. **Set minimum payout amount** if desired

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">🔧 Configuration Management</span>

</div>

For developers updating the Stripe integration:

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">🔧 Key Configuration Files</span>

</div>

1. **`/lib/stripe/connect.ts`** - Stripe Connect integration
2. **`/app/api/stripe/connect/route.ts`** - Connect API endpoints
3. **`/components/dashboard/stripe-connect.tsx`** - UI components

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">📌 Environment Variables Required</span>

</div>

```env
<div style="background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">🔧 Stripe Configuration</span>

</div>
STRIPE_SECRET_KEY=sk_live_... # or sk_test_...
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_... # or pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_CONNECT_WEBHOOK_SECRET=whsec_...
```

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">📌 Webhook Endpoints</span>

</div>

Configure these webhooks in your Stripe dashboard:

1. **Account Webhooks** (`/api/webhooks/stripe`):
   - `payment_intent.succeeded`
   - `payment_intent.payment_failed`
   - `charge.dispute.created`

2. **Connect Webhooks** (`/api/webhooks/stripe/connect`):
   - `account.updated`
   - `account.application.deauthorized`
   - `capability.updated`

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">🧪 Testing Stripe Connect</span>

</div>

1. **Use Stripe's test mode** for development
2. **Test account creation flow**:
   ```bash
   curl -X POST http://localhost:3000/api/stripe/connect \
     -H "Content-Type: application/json" \
     -d '{"organizationId": "test-org-id"}'
   ```

3. **Test webhook handling**:
   - Use Stripe CLI for local testing
   - Forward events to local server
   ```bash
   stripe listen --forward-to localhost:3000/api/webhooks/stripe
   ```

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">📌 Updating Stripe Integration</span>

</div>

When modifying the Stripe integration:

1. **Update TypeScript types** in `/types/stripe.ts`
2. **Test in Stripe's test mode** first
3. **Update webhook handlers** for new events
4. **Add error handling** for new scenarios
5. **Update documentation** for customers

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">📌 Common Stripe Issues and Solutions</span>

</div>

**Issue: Connect account creation fails**
- Check API keys are correct
- Verify webhook endpoints are configured
- Ensure required business information is provided

**Issue: Payments not processing**
- Check account verification status
- Verify payout methods are configured
- Check for any account restrictions

**Issue: Webhook events not received**
- Verify webhook URL is accessible
- Check webhook secret matches environment variable
- Ensure correct event types are subscribed

<div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 1.5rem; border-radius: 12px; margin: 2rem 0;">

<span style="font-size: 1.8rem; font-weight: 700;">🔍 Troubleshooting</span>

</div>

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">📌 Common Issues</span>

</div>

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">🔐 1. Authentication Issues</span>

</div>

**Problem: "Unauthorized" errors when accessing API routes**
```bash
<div style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Check environment variables</span>

</div>
cat .env.local | grep CLERK

<div style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">🔧 Verify Clerk configuration</span>

</div>
echo $NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY
echo $CLERK_SECRET_KEY
```

**Solution:**
- Ensure all Clerk environment variables are set
- Check that publishable key starts with `pk_`
- Verify secret key starts with `sk_`
- Confirm redirect URLs match in Clerk dashboard

**Problem: Infinite redirect loops on sign-in**

**Solution:**
```bash
<div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Check redirect URLs in .env.local</span>

</div>
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/dashboard
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/onboarding
```

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">🗄️ 2. Database Connection Issues</span>

</div>

**Problem: "Failed to connect to database" errors**

**Solution:**
```bash
<div style="background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">🧪 Test Supabase connection</span>

</div>
curl -H "apikey: YOUR_ANON_KEY" \
  "https://YOUR_PROJECT.supabase.co/rest/v1/organizations"

<div style="background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Check environment variables</span>

</div>
echo $NEXT_PUBLIC_SUPABASE_URL
echo $NEXT_PUBLIC_SUPABASE_ANON_KEY
echo $SUPABASE_SERVICE_ROLE_KEY
```

**Problem: "relation does not exist" errors**

**Solution:**
```bash
<div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">🗄️ Run database migrations</span>

</div>
supabase db push

<div style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">🗄️ Reset database if needed</span>

</div>
supabase db reset

<div style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Generate fresh TypeScript types</span>

</div>
npm run db:generate
```

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">📌 3. Team Invitation System</span>

</div>

**Problem: Invitations showing "pending" but emails not sent**

**Current Status:** The invitation system creates database records but emails are logged to console in development.

**For Production:** Integrate with email service:
```typescript
// In lib/invitations.ts, replace console.log with:
await sendEmail({
  to: email,
  subject: `Invitation to join ${organizationName}`,
  html: emailContent
});
```

**Problem: "invitation_token" column errors**

**Solution:**
```sql
-- Run this migration manually if needed
ALTER TABLE users ADD COLUMN IF NOT EXISTS invitation_token TEXT;
ALTER TABLE users ADD COLUMN IF NOT EXISTS status TEXT DEFAULT 'accepted';
ALTER TABLE users ADD COLUMN IF NOT EXISTS invited_at TIMESTAMP WITH TIME ZONE;
```

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">📌 4. Role-Based Access Issues</span>

</div>

**Problem: Admin section not showing in sidebar**

**Solution:**
```sql
-- Check user role in database
SELECT id, email, role, organization_id FROM users WHERE email = 'your-email@example.com';

-- Update user to super_admin if needed
UPDATE users SET role = 'super_admin', organization_id = NULL WHERE email = 'your-email@example.com';
```

**Problem: Wrong dashboard showing for user role**

**Debug Steps:**
1. Check `components/dashboard/dashboard-header.tsx` logs
2. Verify user role in database matches expected role
3. Clear browser cache and cookies
4. Check Clerk user metadata

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">📌 5. Widget Customization Issues</span>

</div>

**Problem: Widget changes not saving**

**Solution:**
```bash
<div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">🔌 Check API routes are working</span>

</div>
curl -X POST http://localhost:3000/api/widgets \
  -H "Content-Type: application/json" \
  -d '{"name":"test","config":{}}'

<div style="background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">🗄️ Verify database permissions</span>

</div>
<div style="background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Check RLS policies in Supabase dashboard</span>

</div>
```

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">📌 6. Stripe Integration Issues</span>

</div>

**Problem: "Invalid API key" errors**

**Solution:**
```bash
<div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Verify Stripe keys format</span>

</div>
echo $STRIPE_SECRET_KEY        # Should start with sk_
echo $NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY  # Should start with pk_

<div style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">🧪 Test Stripe connection</span>

</div>
curl https://api.stripe.com/v1/payment_intents \
  -u $STRIPE_SECRET_KEY: \
  -d amount=1000 \
  -d currency=usd
```

**Problem: Webhooks not being received**

**Solution:**
1. Use ngrok for local testing:
```bash
ngrok http 3000
<div style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Use the https URL for webhook endpoints</span>

</div>
```

2. Verify webhook endpoints in Stripe dashboard:
   - `/api/webhooks/stripe`
   - `/api/webhooks/stripe/connect`

<div style="background: rgba(59, 130, 246, 0.05); border-left: 2px solid #3b82f6; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">

<span style="font-size: 1.2rem; font-weight: 500; color: #1d4ed8;">🚀 7. Build and Deployment Issues</span>

</div>

**Problem: TypeScript errors during build**

**Solution:**
```bash
<div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Check for type errors</span>

</div>
npm run lint
npx tsc --noEmit

<div style="background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Regenerate types</span>

</div>
npm run db:generate

<div style="background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Clear Next.js cache</span>

</div>
rm -rf .next
npm run build
```

**Problem: Environment variables not loading**

**Solution:**
- Ensure `.env.local` exists (not `.env.example`)
- Restart development server after changes
- Check variable names match exactly (case-sensitive)
- For production, set variables in deployment platform

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">📌 Debug Mode</span>

</div>

Enable detailed logging by adding to `.env.local`:
```env
<div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Enable detailed logs</span>

</div>
NODE_ENV=development
DEBUG=true
NEXT_PUBLIC_DEBUG=true
```

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">📌 Performance Issues</span>

</div>

**Problem: Slow page loads**

**Solution:**
```bash
<div style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Analyze bundle size</span>

</div>
npm run build
npm install -g @next/bundle-analyzer
ANALYZE=true npm run build

<div style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">🗄️ Check database query performance</span>

</div>
<div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">

<span style="font-size: 2.5rem; font-weight: 800;">📌 Enable slow query logging in Supabase</span>

</div>
```

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">📌 Getting Help</span>

</div>

1. **Check browser console** for JavaScript errors
2. **Check server logs** in terminal running `npm run dev`
3. **Verify database state** in Supabase dashboard
4. **Test API endpoints** with curl or Postman
5. **Check network tab** in browser dev tools

If issues persist:
- Search existing GitHub issues
- Create detailed bug report with:
  - Environment details
  - Steps to reproduce
  - Error messages
  - Screenshots if applicable

<div style="background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); color: white; padding: 1.5rem; border-radius: 12px; margin: 2rem 0;">

<span style="font-size: 1.8rem; font-weight: 700;">📌 Contributing</span>

</div>

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">📖 Development Guidelines</span>

</div>

1. **Follow TypeScript** - Use proper types for all functions
2. **Component Structure** - Keep components focused and reusable
3. **Error Handling** - Implement proper error boundaries
4. **Testing** - Add tests for new features
5. **Documentation** - Update docs when adding features

<div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 1.5rem; margin: 2rem 0; border-radius: 8px;">

<span style="font-size: 1.5rem; font-weight: 600; color: #1d4ed8;">✨ Adding New Features</span>

</div>

When adding new features:

1. **Plan the Architecture** - Consider multi-tenant implications
2. **Update Types** - Add TypeScript definitions
3. **Create API Routes** - Follow existing patterns
4. **Add UI Components** - Use existing design system
5. **Test Thoroughly** - Test across different roles
6. **Update Documentation** - Add to this README

---
